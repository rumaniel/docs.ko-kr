---
title: PNRP 캐시
ms.date: 03/30/2017
ms.assetid: 270068d9-1b6b-4eb9-9e14-e02326bb88df
ms.openlocfilehash: 3ed3e11e702c8933b500421de5654b212cdd80d8
ms.sourcegitcommit: 2701302a99cafbe0d86d53d540eb0fa7e9b46b36
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 04/28/2019
ms.locfileid: "64622985"
---
# <a name="pnrp-caches"></a>PNRP 캐시
PNRP(피어 이름 확인 프로토콜) 캐시는 한 피어에서 유지 관리되며 알고리즘 방식으로 선택된 피어 엔드포인트의 로컬 컬렉션입니다.  
  
## <a name="pnrp-cache-initialization"></a>PNRP 캐시 초기화  
 PNRP 캐시 또는 Peer Name Reord Collection을 초기화하려면 피어 노드가 시작될 때 노드에서 다음 메서드를 사용할 수 있습니다.  
  
- 노드가 종료될 때 캐시에 포함되어 있던 영구적 캐시 항목은 하드 디스크 스토리지에서 로드됩니다.  
  
- 애플리케이션에서 P2P 협업 인프라를 사용하는 경우 협업 정보는 해당 노드의 연락처 관리자에 있습니다.  
  
## <a name="scaling-peer-name-resolution-with-a-multi-level-cache"></a>다중 수준 캐시로 피어 이름 확인 확장  
 피어 노드에서는 PNRP 캐시의 크기를 작게 유지하기 위해 다중 수준 캐시를 사용합니다. 이러한 다중 수준 캐시의 각 수준에는 최대 개수의 항목이 들어 있습니다. 캐시의 각 수준은 PNRP ID 번호 공간(2<sup>256</sup>)의 1/10에 해당하는 부분을 나타냅니다. 캐시의 최하위 수준에는 로컬로 등록된 PNRP ID와 수치상 해당 PNRP ID에 가까운 다른 PNRP ID가 들어 있습니다. 캐시의 특정 수준이 최대 항목 수인 20개의 항목으로 채워지면 새로운 하위 수준이 생성됩니다. 캐시에 생성될 수 있는 수준의 최대 수는 log10(클라우드의 총 PNRP ID 수)의 차수에 해당합니다. 예를 들어 PNRP ID가 1억개 포함된 글로벌 클라우드의 경우 캐시에 수준이 8개(=log10(100,000,000))까지만 생성될 수 있으며 이름 확인 작업을 수행하는 동안 PNRP ID를 확인하는 홉의 개수도 이와 비슷하게 됩니다. 이러한 메커니즘을 활용하면 해당 CPA가 있는 피어를 찾을 때까지 PNRP 요청 메시지를 다음으로 가까운 피어에 전달함으로써 임의 PNRP ID를 확인할 수 있는 분산된 해시 테이블을 만들 수 있습니다.  
  
 항상 이름 확인이 가능하도록 하기 위해 노드에서는 캐시의 최하위 수준에 항목을 추가할 때마다 항목의 복사본을 캐시의 마지막 수준 내에 있는 모든 노드로 전파합니다.  
  
 캐시 항목은 시간이 지남에 따라 새로 고쳐지고 오래된 항목은 캐시에서 제거됩니다. 따라서 주소 레코드와 DNS 프로토콜에서 주소에 연결된 노드가 네트워크에서 작동 중인지 여부가 보장되지 않는 DNS와는 달리 PNRP ID의 분산된 해시 테이블은 현재 엔드포인트를 기준으로 합니다.  
  
## <a name="other-pnrp-caches"></a>다른 PNRP 캐시  
 또 다른 영구 데이터 저장소는 로컬 캐시입니다.  PNRP 활동에 필요한 다른 개체 외에도, 클라우드의 모든 멤버 간에 안전하게 게시 및 동기화되는 PNRP 클라우드 또는 협업 세션과 연결된 레코드를 포함할 수 있습니다. 이 복제된 저장소는 그룹 데이터 보기를 나타내며, 모든 그룹 멤버에 대해 동일해야 합니다. 기술적으로 이러한 개체는 본질적으로 레코드가 아니라 로컬 캐시에 사용되는 개체 데이터, 현재 상태 및 애플리케이션입니다. PNRP 클라우드를 사용하면 개체가 협업 세션 또는 PNRP 클라우드의 모든 노드에 전파됩니다.  클라우드 멤버 간 레코드 복제에서는 암호화와 데이터 무결성을 제공하기 위해 SSL을 사용합니다.  
  
 피어가 클라우드에 조인할 때, 연결된 호스트 피어에서 자동으로 로컬 캐시 데이터를 받지 않습니다. 애플리케이션, 현재 상태 및 개체 데이터의 업데이트를 받으려면 호스트 피어에 가입해야 합니다. 모든 그룹 멤버에게 일관되게 동일한 보기가 표시되도록 초기 동기화 후에 피어에서 복제된 저장소를 정기적으로 다시 동기화합니다.  협업 세션 또는 협업 세션의 애플리케이션에서도 동일한 기능을 수행할 수 있습니다.  
  
 클라우드의 협업 세션이 시작되고 나면 애플리케이션에서 피어를 등록하고 클라우드 범위를 통해 정의된 보안을 사용하여 정보 게시를 시작할 수 있습니다. 피어가 클라우드에 조인하면 클라우드의 보안 메커니즘이 피어에 적용되므로, 참여할 범위를 제공합니다.  그러면 클라우드의 범위에서 해당 레코드를 안전하게 게시할 수 있습니다. 클라우드 범위는 협업 애플리케이션 범위와 같을 수 없습니다.  
  
 피어는 다른 피어에서 개체를 받도록 등록할 수 있습니다. 개체를 업데이트하면, 협업 애플리케이션에 알림이 전달되고 새 개체가 애플리케이션의 모든 구독자에게 전달됩니다. 예를 들어 그룹 채팅 애플리케이션의 피어가 애플리케이션 정보를 받기 위해 등록할 수 있습니다. 그러면 모든 채팅 레코드를 애플리케이션 데이터로 전송합니다.  클라우드 내의 채팅 작업을 모니터링할 수 있습니다.  
  
## <a name="see-also"></a>참고 항목

- <xref:System.Net.PeerToPeer>
